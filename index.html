<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Meeting Room Display</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#000;color:#fff}
.container{display:flex;height:100vh}
.left{width:60%;padding:40px}
.right{width:40%;padding:40px;text-align:right}
.room{font-size:36px}
.status{margin-top:20px;padding:20px;background:orange;border-radius:10px}
.time{font-size:48px}
</style>
</head>
<body>

<div class="container">
<div class="left">
  <div class="room" id="room"></div>
  <div class="status">
    <h2 id="status">AVAILABLE</h2>
    <div id="current"></div>
  </div>
  <h3>Meeting Berikutnya</h3>
  <div id="next"></div>
  <h3>Meeting Selesai</h3>
  <div id="past"></div>
</div>
<div class="right">
  <div class="time" id="clock"></div>
  <div id="date"></div>
</div>
</div>

<script>
const API_URL = "https://script.google.com/u/0/home/projects/10utXxYqgdkiYOdwiqHra19BTEz2Y6xlsn2FJDQ4A3upMPVSBbOMRLvBG/edit";
const ROOM_NAME = "Meeting Room A";
let meetings = [];

async function loadData(){
  const res = await fetch(`${API_URL}?room=${ROOM_NAME}`);
  const data = await res.json();
  meetings = data.meetings;
  room.innerText = data.roomName;
}

function update(){
  const now=new Date();
  const t=now.toTimeString().slice(0,5);
  clock.innerText=t;
  date.innerText=now.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"});
  let cur=null,nxt=null,pst=[];
  meetings.forEach(m=>{
    if(t>=m.start&&t<=m.end)cur=m;
    else if(t<m.start&&!nxt)nxt=m;
    else if(t>m.end)pst.push(m);
  });
  status.innerText=cur?"SEDANG DIGUNAKAN":"AVAILABLE";
  current.innerText=cur?`${cur.title} (${cur.start}-${cur.end})`:"-";
  next.innerText=nxt?`${nxt.title} (${nxt.start}-${nxt.end})`:"-";
  past.innerText=pst.length?pst[pst.length-1].title:"-";
}

loadData();
setInterval(update,1000);
</script>

</body>
</html>

